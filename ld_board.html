<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ラッキー傭兵団 情報掲示板</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <link rel="stylesheet" href="ld_board.css" />
</head>
<body>
  <div class="app-root">
    <!-- 上部固定ヘッダー -->
    <header class="app-header">
      <h1 class="app-title">ラッキー傭兵団 情報掲示板</h1>

      <!-- ユーザー名 / パス -->
      <section class="user-panel">
        <div class="user-input-row">
          <label class="user-label">
            ユーザー名
            <input
              id="userNameInput"
              type="text"
              maxlength="16"
              placeholder="最大 全角8文字 / 半角16文字"
            />
          </label>
          <label class="user-label">
            パス
            <input
              id="userTagInput"
              type="text"
              maxlength="10"
              placeholder="最大 全角5文字 / 半角10文字"
            />
          </label>
        </div>
        <div class="user-status-row">
          <span id="userStatusLabel" class="user-status-label">名無しとして投稿</span>
        </div>
      </section>

      <!-- フィルター開閉ボタン -->
      <div class="filter-toggle-wrapper">
        <button id="filterToggleBtn" type="button" class="filter-toggle-btn">
          🔍 フィルターを開く
        </button>
      </div>

      <!-- フィルターパネル -->
      <section id="filterPanel" class="filter-panel filter-panel--collapsed">
        <div class="filter-row">
          <label class="filter-label">
            キーワード
            <input id="keywordInput" type="text" placeholder="キーワードを入力" />
          </label>
        </div>

        <div class="filter-row filter-row--targets">
          <span class="filter-caption">対象</span>
          <label><input id="targetBody" type="checkbox" checked />本文</label>
          <label><input id="targetTitle" type="checkbox" checked />タイトル</label>
          <label><input id="targetUser" type="checkbox" checked />ユーザー名</label>
        </div>

        <div class="filter-row filter-row--genres">
          <span class="filter-caption">ジャンル</span>
          <label><input id="genreNormal" type="checkbox" checked />通常</label>
          <label><input id="genreQa" type="checkbox" checked />質問・相談</label>
          <label><input id="genreReport" type="checkbox" checked />報告</label>
          <label><input id="genreAnnounce" type="checkbox" checked />アナウンス</label>
        </div>

        <div class="filter-row filter-row--flags">
          <label>
            <input id="filterSinceMyLast" type="checkbox" />
            自身の最終書込み以降のみを表示（要登録）
          </label>
          <label>
            <input id="filterHasAttachment" type="checkbox" />
            盤面・画像付きコメントに限定
          </label>
        </div>

        <div class="filter-summary-row">
          <span class="filter-summary-label">現在のフィルター:</span>
          <span id="filterSummaryText" class="filter-summary-text">（すべて表示中）</span>
        </div>
      </section>
    </header>

    <!-- コメントリスト -->
    <main class="app-main">
      <!-- 上部：さらに古いコメントボタン -->
      <div class="load-more-row" id="loadMoreRowTop">
        <button id="loadMoreBtn" type="button" class="load-more-btn">
          さらに古いコメントを読み込む
        </button>
        <div id="loadMoreStatus" class="load-more-status"></div>
      </div>

      <!-- スレッドカードコンテナ -->
      <div id="threadsContainer" class="threads-container">
        <!-- JS から挿入 -->
      </div>

      <!-- 一番下のスペース（最新コメントの下に余白） -->
      <div class="threads-bottom-spacer"></div>
    </main>

    <!-- フッター：コメント入力ツール -->
    <footer class="footer-comment">
      <div class="footer-toggle" id="footerToggle">
        <span id="composerToggleLabel">▲コメントの入力ツールを表示(タップ)</span>
      </div>

      <div class="footer-body" id="composerBody">
        <!-- 返信中情報 -->
        <div id="replyInfoRow" class="reply-info-row reply-info-row--hidden">
          <span id="replyInfoText"></span>
          <button id="cancelReplyBtn" type="button" class="reply-cancel-btn">返信を解除</button>
        </div>

        <!-- ジャンル選択 -->
        <div class="composer-row composer-row--genre" id="composerGenreRow">
          <span class="composer-caption">ジャンル</span>
          <label><input type="radio" name="genre" value="normal" checked />通常</label>
          <label><input type="radio" name="genre" value="qa" />質問・相談</label>
          <label><input type="radio" name="genre" value="report" />報告</label>
          <label><input type="radio" name="genre" value="announce" />アナウンス</label>
        </div>

        <!-- 本文 -->
        <div class="composer-row">
          <textarea
            id="commentBodyInput"
            rows="4"
            class="composer-textarea"
            placeholder="コメントを入力..."
          ></textarea>
        </div>

        <!-- 添付 -->
        <div class="composer-row composer-row--attach">
          <button id="attachBoardBtn" type="button" class="attach-btn">盤面IDを添付</button>
          <button id="attachImageBtn" type="button" class="attach-btn">画像を添付</button>
        </div>
        <div class="composer-row composer-row--attach-status">
          <span id="attachedBoardLabel" class="attach-chip attach-chip--hidden"></span>
          <button id="clearBoardAttachBtn" type="button" class="attach-chip-remove-btn attach-chip-remove-btn--hidden">×</button>
          <span id="attachedImageLabel" class="attach-chip attach-chip--hidden"></span>
        </div>
          <button id="clearImageAttachBtn" type="button" class="attach-chip-remove-btn attach-chip-remove-btn--hidden">×</button>
        </div>

        <!-- 投稿ボタン -->
        <div class="composer-row composer-row--submit">
          <button id="submitCommentBtn" type="button" class="submit-btn">投稿する</button>
          <span id="composerStatus" class="composer-status"></span>
        </div>

        <!-- 画像ファイル入力（隠し） -->
        <input
          id="imageFileInput"
          type="file"
          accept="image/*"
          multiple
          style="display: none;"
        />
      </div>
    </footer>

    <!-- 画像モーダル -->
    <div id="imageModal" class="ld-modal-backdrop ld-modal-hidden">
      <div class="ld-modal">
        <button type="button" class="ld-modal-close-btn" data-modal-close="imageModal">×</button>
        <div class="ld-modal-body ld-modal-body--image">
          <img id="modalImage" src="" alt="画像" />
        </div>
      </div>
    </div>

    <!-- 歯車モーダル -->
    <div id="gearModal" class="ld-modal-backdrop ld-modal-hidden">
      <div class="ld-modal ld-modal--scroll">
        <button type="button" class="ld-modal-close-btn" data-modal-close="gearModal">×</button>
        <div id="gearModalBody" class="ld-modal-body"></div>
      </div>
    </div>

    <!-- プロフィールモーダル -->
    <div id="profileModal" class="ld-modal-backdrop ld-modal-hidden">
      <div class="ld-modal ld-modal--scroll">
        <button type="button" class="ld-modal-close-btn" data-modal-close="profileModal">×</button>
        <div id="profileModalBody" class="ld-modal-body"></div>
      </div>
    </div>

    <!-- トーストコンテナ -->
    <div id="toastContainer" class="toast-container"></div>
  </div>

  <script type="module" src="ld_board.js"></script>
</body>
</html>
