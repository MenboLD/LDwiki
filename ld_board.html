<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="description" content="ラッキー傭兵団（LuckyDefense）の情報掲示板。攻略情報の共有、質問、募集など。">
  <link rel="icon" href="/LDwiki/favicon.ico">
  <link rel="apple-touch-icon" href="/LDwiki/apple-touch-icon.png">
  <link rel="manifest" href="/LDwiki/manifest.webmanifest">
  <meta name="theme-color" content="#06080c">
  <title>ラッキー傭兵団 情報掲示板</title>
  <meta name="ldwiki-build" content="20251223a">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0">

  <link rel="stylesheet" href="/LDwiki/ld_board.css?v=20251223a">
  <link rel="stylesheet" href="/LDwiki/common_header.css?v=20251223a">
</head>
<body data-page-name="情報掲示板">
  <!-- 上部固定ヘッダー（共通） -->
  <div class="topbar" role="banner">
    <div class="topbar-row topbar-row--primary">
      <div class="topbar-title">ラッキー傭兵団 攻略 wiki</div>
      <div class="topbar-page" id="topbarPageName">&gt; 情報掲示板</div>
      <button class="topbar-menu-btn" id="topbarMenuBtn" type="button" aria-label="メニューを開閉">☰</button>
    </div>

    <form class="topbar-row topbar-row--auth" id="authForm" aria-label="ログイン操作" autocomplete="on">
      <div class="topbar-auth-label" id="topbarAuthLabel">未ログイン：</div>

      <label class="topbar-auth-field" aria-label="ユーザー名">
        <input id="authUserName" type="text" inputmode="text" autocomplete="username" placeholder="ユーザー名" />
      </label>

      <label class="topbar-auth-field" aria-label="パス">
        <input id="authPass" type="password" autocomplete="current-password" placeholder="" />
        <div class="topbar-auth-ghost" id="authGhost">ゲスト状態</div>
      </label>

      <button class="topbar-auth-btn" id="authLoginBtn" type="button">ログイン</button>

      <div class="topbar-auth-state" id="authStateWrap">
        <span class="topbar-auth-state-text" id="authStateText">ログイン中: -</span>
        <button class="topbar-auth-logout" id="authLogoutBtn" type="button">ログアウト</button>
      </div>
    </form>
  </div>

  <!-- 左側ドロワーメニュー -->
  <nav class="drawer" id="drawer" aria-label="サイトメニュー">
    <div class="drawer-header">
      <p class="drawer-title">ラッキー傭兵団 攻略 wiki</p>
      <p class="drawer-subtitle">(試験運用・作成中)</p>
    </div>
    <div class="drawer-close-row">
      <button class="drawer-close-button" type="button" id="drawerCloseBtn">閉じる ◀</button>
    </div>
    <div class="drawer-body">
      <ul class="drawer-nav">
        <!-- 上段：メイン導線 -->
        <li class="drawer-nav-item">
          <a href="#" class="drawer-link">トップページ</a>
        </li>
        <li class="drawer-nav-item">
          <a href="#" class="drawer-link">情報掲示板</a>
        </li>
        <li class="drawer-nav-item">
          <a href="#" class="drawer-link">ユーザーデータベース</a>
        </li>
        <li class="drawer-nav-item">
          <a href="#" class="drawer-link">攻略の手引き</a>
        </li>
        <li class="drawer-nav-item">
          <a href="#" class="drawer-link">ユニットDB</a>
        </li>
        <li class="drawer-nav-item">
          <a href="#" class="drawer-link">データツール</a>
        </li>

        <!-- スペース -->
        <li class="drawer-group-separator"></li>

        <!-- 中段：サイト情報系 -->
        <li class="drawer-nav-item">
          <a href="#" class="drawer-link">サイトについて</a>
        </li>
        <li class="drawer-nav-item">
          <a href="#" class="drawer-link">利用ルール</a>
        </li>
        <li class="drawer-nav-item">
          <a href="#" class="drawer-link">更新履歴</a>
        </li>

        <!-- スペース -->
        <li class="drawer-group-separator"></li>

        <!-- 下段：編集者向け -->
        <li class="drawer-nav-item">
          <a href="#" class="drawer-link">編集者ログイン / ログアウト</a>
        </li>
      </ul>
    </div>
    <div class="drawer-footer">
      編集メニューや子ツリー（攻略・ユニットDB・データツール）は、後日ここから展開予定。
    </div>
  </nav>

  <div class="drawer-overlay" id="drawerOverlay"></div>
<!-- ページ本体 -->
  <div class="page">
    

  <!-- Page content -->
  <main class="app-main">
      <!-- 上部：さらに古いコメントボタン -->
      <div class="load-more-row" id="loadMoreRowTop">
        <button id="loadMoreBtn" type="button" class="load-more-btn">
          さらに古いコメントを読み込む
        </button>
        <div id="loadMoreStatus" class="load-more-status"></div>
      </div>

      <!-- スレッドカードコンテナ -->
      <div id="threadsContainer" class="threads-container">
        <!-- JS から挿入 -->
      </div>

      <!-- 一番下のスペース（最新コメントの下に余白） -->
      <div class="threads-bottom-spacer"></div>
    </main>

    <!-- フッター：コメント入力ツール -->
    <footer class="footer-comment">
      <div class="footer-toggle" id="footerToggle">
        <span id="composerToggleLabel">▲コメントの入力ツールを表示(タップ)</span>
      </div>

      <div class="footer-body" id="composerBody">
        <!-- 返信中情報 -->
        <div id="replyInfoRow" class="reply-info-row reply-info-row--hidden">
          <span id="replyInfoText"></span>
          <button id="cancelReplyBtn" type="button" class="reply-cancel-btn">返信を解除</button>
        </div>

        <!-- ジャンル選択 -->
        <div class="composer-row composer-row--genre" id="composerGenreRow">
          <span class="composer-caption">ジャンル</span>
          <label><input type="radio" name="genre" value="normal" checked />通常</label>
          <label><input type="radio" name="genre" value="qa" />質問・相談</label>
          <label><input type="radio" name="genre" value="report" />報告</label>
          <label><input type="radio" name="genre" value="announce" />アナウンス</label>
        </div>

        <!-- 本文 -->
        <div class="composer-row">
          <textarea
            id="commentBodyInput"
            rows="4"
            class="composer-textarea"
            placeholder="コメントを入力..."
          ></textarea>
        </div>

        <!-- 添付 -->
        <div class="composer-row composer-row--attach">
          <button id="attachBoardBtn" type="button" class="attach-btn">盤面IDを添付</button>
          <button id="attachImageBtn" type="button" class="attach-btn">画像を添付</button>
        </div>
        <div class="composer-row composer-row--attach-status">
          <span id="attachedBoardLabel" class="attach-chip attach-chip--hidden"></span>
          <button id="clearBoardAttachBtn" type="button" class="attach-chip-remove-btn attach-chip-remove-btn--hidden" aria-label="添付盤面を削除">×</button>
          <span id="attachedImageLabel" class="attach-chip attach-chip--hidden"></span>
          <button id="clearImageAttachBtn" type="button" class="attach-chip-remove-btn attach-chip-remove-btn--hidden" aria-label="添付画像を削除">×</button>
        </div>

        <!-- 投稿ボタン -->
        <div class="composer-row composer-row--submit">
          <button id="submitCommentBtn" type="button" class="submit-btn">投稿する</button>
          <span id="composerStatus" class="composer-status"></span>
        </div>

        <!-- 画像ファイル入力（隠し） -->
        <input
          id="imageFileInput"
          type="file"
          accept="image/*"
          multiple
          style="display: none;"
        />
      </div>
    </footer>

    <!-- 画像モーダル -->
    <div id="imageModal" class="ld-modal-backdrop ld-modal-hidden">
      <div class="ld-modal">
        <button type="button" class="ld-modal-close-btn" data-modal-close="imageModal">×</button>
        <div class="ld-modal-body ld-modal-body--image">
          <img id="modalImage" src="" alt="画像" />
        </div>
      </div>
    </div>

    <!-- 歯車モーダル -->
    <div id="gearModal" class="ld-modal-backdrop ld-modal-hidden">
      <div class="ld-modal ld-modal--scroll">
        <button type="button" class="ld-modal-close-btn" data-modal-close="gearModal">×</button>
        <div id="gearModalBody" class="ld-modal-body"></div>
      </div>
    </div>

    <!-- プロフィールモーダル -->
    <div id="profileModal" class="ld-modal-backdrop ld-modal-hidden">
      <div class="ld-modal ld-modal--scroll">
        <button type="button" class="ld-modal-close-btn" data-modal-close="profileModal">×</button>
        <div id="profileModalBody" class="ld-modal-body"></div>
      </div>
    </div>

    <!-- トーストコンテナ -->
    <div id="toastContainer" class="toast-container"></div>

  <script src="/LDwiki/supabase_config.js?v=20251223a"></script>
  <script src="/LDwiki/common_header.js?v=20251223a"></script>
  <script src="/LDwiki/ld_board.js?v=20251223a"></script>
</body>
</html>
