<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ユーザーデータベース編集（ld_users）</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./ld_users_editor.css?v=20251213_1350" />

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div>
        <div class="app-title">ユーザーデータベース</div>
        <div class="app-subtitle">v1.0.1_202512140918</div>
      </div>
      <div id="headerStats" class="app-subtitle"></div>
    </header>

    <main>
      <section id="homeView" class="card">
        <div class="card-title">メニュー</div>
        <div class="field">
          <button id="btnGoNew" class="btn-primary">＋ 新規ユーザー登録</button>
        </div>
        <div class="card-title" style="margin-top:8px;">ユーザー検索</div>
        <div class="field">
          <div class="search-row">
            <input id="searchNameInput" type="text" placeholder="ユーザー名（部分一致可）" />
            <button id="btnSearch" class="btn-small primary">検索</button>
          </div>
        </div>
        <div id="searchResults" class="search-results"></div>
      </section>

      <section id="formView" class="card hidden">
        <div id="formModeLabel" class="mode-label"></div>
        <div class="field">
          <label for="inputName">ユーザー名</label>
          <input id="inputName" type="text" autocomplete="off" />
        </div>
        <div class="field" id="fieldTag">
          <label for="inputTag">識別番号（2桁）</label>
          <input id="inputTag" type="text" maxlength="2" placeholder="00〜99" autocomplete="off" />
        </div>
        <div class="field">
          <label for="selectVaultLevel">金庫レベル（1〜11）</label>
          <select id="selectVaultLevel"></select>
        </div>
        <div class="field">
          <label>神話ユニット育成状態（画像一覧）</label>
          <div id="mythicGrid"></div>
          <div class="mythic-note">
            ※ アイコンをタップして選択。<br />
            「全選択」「選択解除」「Lv6/12/15」「専用👑」ボタンで一括変更できます。<br />
            画像パスは <code>ICON_BASE_PATH + "501.png"</code> 形式を想定。
          </div>
        </div>
        <div class="status-row">
          <span id="statusComments">コメ数: -</span>
          <span id="statusMisInputs">誤入力: -</span>
          <span id="statusLikes">イイね: -</span>
        </div>
        <div class="btn-row">
          <button id="btnBackHome" class="btn-secondary">戻る</button>
          <button id="btnSaveUser" class="btn-primary">保存</button>
        </div>
      </section>
    </main>

    <div id="modalBackdrop" class="modal-backdrop">
      <div class="modal">
        <div class="modal-title">ユーザーデータ編集</div>
        <div id="modalBody" class="modal-body"></div>
        <div class="field">
          <label for="modalTagInput">識別番号（2桁）</label>
          <input id="modalTagInput" type="text" maxlength="2" autocomplete="off" />
        </div>
        <div id="modalError" class="modal-body text-danger" style="display:none;"></div>
        <div class="modal-actions">
          <button id="btnModalCancel" class="btn-small">キャンセル</button>
          <button id="btnModalOk" class="btn-small primary">決定</button>
        </div>
      </div>
    </div>

    <div id="toast" class="toast"></div>
  </div>

    <script type="module" src="./ld_users_editor.js?v=20251213_1350"></script>

</body>
</html>
