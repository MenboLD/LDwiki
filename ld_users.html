<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="ldwiki-build" content="20251221aa">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>ユーザー情報</title>
  <link rel="icon" href="favicon.ico">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="manifest" href="manifest.webmanifest">

  <!-- Page CSS -->
  <link rel="stylesheet" href="/LDwiki/ld_users.css?v=20251221aa">
  <link rel="stylesheet" href="/LDwiki/common_header.css?v=20251220ah">
</head>

<body data-page-name="ユーザー情報">
  <div class="app-root">
    <main class="app-main">
      <!-- 初期画面 -->
      <section id="homeView" class="card">
        <div class="card-title">ユーザー情報（新規登録 / 編集）</div>

        <div class="home-note">
          <div>・新規登録にはユーザー名とパスをこの下で入力したあと、新規登録ボタンを押してください</div>
          <div>・ユーザー名は最大で全角８文字、半角16文字まで。大文字と小文字の区別アリ</div>
          <div>・パスは最大で全角５文字、半角10文字まで。大文字と小文字の区別アリ</div>
          <div>・ユーザー名が未登録なら「新規登録」、すでに登録済みなら「編集へ」にボタンの表記が変化します</div>
        </div>

        <div class="home-form">
          <label class="home-label">
            ユーザー名
            <input id="userNameInput" type="text" maxlength="16" placeholder="最大 全角8文字 / 半角16文字" autocomplete="username" />
          </label>

          <label class="home-label">
            パス
            <input id="userPassInput" type="password" maxlength="24" placeholder="（未入力）" autocomplete="current-password" disabled />
          </label>

          <button id="userActionBtn" type="button" class="home-action-btn" disabled>※先にユーザー名を入力してください</button>
        </div>

        <div class="home-status-row">
          <span id="userStatusLabel" class="home-status-label">ユーザー名を入力してください</span>
          <span id="headerStats" class="home-status-label home-status-right"></span>
        </div>

        <div class="card-title" style="margin-top:10px;">機能と目的</div>
        <div class="home-note">
          <div>・金庫のレベルやユニットの育成状態などを設定できます。掲示板コメントに表示されるプロフ部分から簡単にこれを確認でき、質問者や回答者に生じるであろう手間を省くことができます</div>
          <div>・今後、戦闘力よりも正確なユーザー攻撃力指数の表示や指定した遺物レベルまでに必要な鉱山の鍵や見込み日数などを表示する機能を検討しています</div>
          <div>・ユーザーの平均金庫レベルやグラフ出しに利用する可能性もあり、アンケート回答的な意味合いも兼ねています</div>
          <div>・当サイトのページ編集作業については、ログイン中のユーザー情報から権限レベルを参照し、これを許可しています</div>
        </div>

        <div class="card-title" style="margin-top:10px;">注意</div>
        <div class="home-note">
          <div>・ユーザー名とパスは変更できません</div>
          <div>・パスは再発行や再確認が不可能です。必ず画面スクリーンショットやメモするなどし、個人で控えてください</div>
          <div>・ユーザー名やパスを除き、ユニットの育成情報などは基本的に公開情報扱いになります。今後、項目ごとに公開/非公開の設定機能は追加予定です</div>
          <div>・登録するユーザー名はゲーム内のプレイヤーとは異なる名前で登録することを推奨します。</div>
          <div>・ゲスト、登録ユーザーの差異にかかわらずIPアドレスなどの情報は運営側に保持されます。</div>
        </div>
      </section>

      <!-- 編集画面 -->
      <section id="formView" class="card hidden">
        <div id="formModeLabel" class="mode-label"></div>

        <div class="field">
          <label for="inputName">ユーザー名</label>
          <input id="inputName" type="text" autocomplete="off" disabled />
        </div>

        <div class="field">
          <label for="inputPass">パス（本人確認）</label>
          <input id="inputPass" type="password" maxlength="24" autocomplete="current-password" />
        </div>

        <div class="field">
          <label for="selectVaultLevel">金庫レベル（1〜11）</label>
          <select id="selectVaultLevel"></select>
        </div>

        <div class="field">
          <button id="unitAccordionToggle" type="button" class="accordion-toggle">▼育成状態（JSON / 仮）</button>
          <div id="unitAccordionBody" class="accordion-body">
            <div class="note-sub">※育成状態のカードUIは後日実装。現状はJSONで保存します。</div>
            <textarea id="mythicStateJson" class="json-box" spellcheck="false" placeholder="{}"></textarea>
            <div class="btn-row" style="margin-top:6px;">
              <button id="btnJsonReset" type="button" class="btn-secondary">{} に戻す</button>
              <button id="btnJsonFormat" type="button" class="btn-secondary">整形</button>
            </div>
          </div>
        </div>

        <div class="status-row">
          <span id="statusComments">コメ数: -</span>
          <span id="statusMisInputs">誤入力: -</span>
          <span id="statusLikes">イイね: -</span>
        </div>

        <div class="btn-row">
          <button id="btnBackHome" class="btn-secondary" type="button">戻る</button>
          <button id="btnSaveUser" class="btn-primary" type="button">保存</button>
        </div>
      </section>
    </main>

    <div id="toast" class="toast"></div>
  </div>

  <script src="/LDwiki/supabase_config.js?v=20251220ah"></script>
  <script src="/LDwiki/common_header.js?v=20251220ah"></script>
  <script src="/LDwiki/ld_users.js?v=20251221aa"></script>
</body>
</html>
