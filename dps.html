<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DPS計算ツール - ラッキー傭兵団</title>
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="BaseDPS.css">
  <script defer src="BaseDPS.js"></script>
</head>
<body>
<div class="wrap">
  <h1>DPS計算ツール（ラッキー傭兵団）</h1>
  <div class="note">
    ・1秒=40フレーム。マナ/CTは <b>40Fのグローバル境界</b>で加算。<br>
    ・出力の小数は <b>小数第6位まで</b>（=第7位四捨五入）。内部計算の丸め規則は変更していません。
  </div>

  <div class="grid">
    <div class="card accordionCard open">
      <div class="headRow accHeader" data-acc="basic">
      <h2 class="accTitle"><span class="accIcon" aria-hidden="true">▼</span>入力：基本</h2>
      <div class="headToggles">
        <div class="seg" data-for="basicAttr">
          <button type="button" data-val="phys">物理</button>
          <button type="button" data-val="magic">魔法</button>
        </div>
        <div class="seg" data-for="basicTarget">
          <button type="button" data-val="single">単体</button>
          <button type="button" data-val="multi">複数</button>
        </div>
      </div>
    </div>
    <input type="hidden" id="basicAttr" value="phys">
    <input type="hidden" id="basicTarget" value="single">

      <div class="cardBody" id="accBody_basic">

      <div class="tworow cols4" id="basicGrid">
        <div class="lbl" style="grid-column:1;">攻撃力</div>
        <div class="lbl" style="grid-column:2;">攻撃速度</div>
        <div class="lbl" style="grid-column:3;">Maxマナ(CT)</div>
        <div class="lbl" id="regenLbl" style="grid-column:4;">Regeマナ/1s</div>

        <div class="inp" style="grid-column:1;">
          <input id="atk" type="text" inputmode="numeric" autocomplete="off" placeholder="1500">
        </div>
        <div class="inp" style="grid-column:2;">
          <input id="aspd" type="text" inputmode="decimal" autocomplete="off" placeholder="2.40">
        </div>
        <div class="inp" style="grid-column:3;">
          <input id="gaugeMax" type="text" inputmode="numeric" autocomplete="off" placeholder="100">
        </div>
        <div class="inp" style="grid-column:4;" id="regenGroup">
          <input id="manaRegenPct" type="text" inputmode="numeric" autocomplete="off" placeholder="100%">
        </div>
      </div>

      <div class="hint">
        ・攻撃力：整数（最大6桁）、4桁以上はカンマ表示。<br>
        ・攻撃速度：小数第2位まで表示、0より大きく最大 8.00。<br>
        ・Maxマナ(CT)：整数（最大3桁）。<br>
        ・Regeマナ/1s：最大4桁%（小数1桁まで可）。「100%」= 時間マナ1.0/秒。マナタイプ以外は未使用表示。
      </div>      </div>

    </div>

    <div class="card accordionCard open">
      <div class="headRow accHeader" data-acc="ult">
      <h2 class="accTitle"><span class="accIcon" aria-hidden="true">▼</span>入力：究極</h2>
      <div class="headToggles">
        <div class="seg" data-for="ultAttr">
          <button type="button" data-val="phys">物理</button>
          <button type="button" data-val="magic">魔法</button>
        </div>
        <div class="seg" data-for="ultTarget">
          <button type="button" data-val="single">単体</button>
          <button type="button" data-val="multi">複数</button>
        </div>
      </div>
    </div>
    <input type="hidden" id="ultAttr" value="magic">
    <input type="hidden" id="ultTarget" value="multi">

      <div class="cardBody" id="accBody_ult">

      <div class="tworow cols4">
        <div class="lbl" style="grid-column:1;">タイプ</div>
        <div class="lbl" style="grid-column:2;">リセット</div>
        <div class="lbl" style="grid-column:3;">倍率</div>
        <div class="lbl" style="grid-column:4;">Ｆ数</div>

        <div class="inp" style="grid-column:1;">
          <select id="ultType">
            <option value="none">無し</option>
            <option value="mana" selected>マナ</option>
            <option value="cool">クール</option>
          </select>
        </div>
        <div class="inp" style="grid-column:2;">
          <select id="ultReset">
            <option value="end" selected>終了時</option>
            <option value="start">開始時</option>
          </select>
        </div>
        <div class="inp" style="grid-column:3;">
          <input id="ultMulPct" type="text" inputmode="numeric" autocomplete="off" placeholder="1500%">
        </div>
        <div class="inp" style="grid-column:4;">
          <input id="ultF" type="text" inputmode="numeric" autocomplete="off" placeholder="44">
        </div>
      </div>

      <div class="chk">
        <input id="ultStopsGauge" type="checkbox" checked>
        <span>究極モーション中はマナ/CTの加算が停止する</span>
      </div>      </div>

    </div>

    <div class="card accordionCard open">
      <div class="headRow accHeader" data-acc="a">
      <h2 class="accTitle"><span class="accIcon" aria-hidden="true">▼</span>入力：スキルA</h2>
      <div class="headToggles">
        <div class="seg" data-for="aAttr">
          <button type="button" data-val="phys">物理</button>
          <button type="button" data-val="magic">魔法</button>
        </div>
        <div class="seg" data-for="aTarget">
          <button type="button" data-val="single">単体</button>
          <button type="button" data-val="multi">複数</button>
        </div>
      </div>
    </div>
    <input type="hidden" id="aAttr" value="magic">
    <input type="hidden" id="aTarget" value="single">

      <div class="cardBody" id="accBody_a">

      <div class="tworow cols3">
        <div class="lbl" style="grid-column:1;">倍率</div>
        <div class="lbl" style="grid-column:2;">確率</div>
        <div class="lbl" style="grid-column:3;">Ｆ数</div>

        <div class="inp" style="grid-column:1;">
          <input id="aMulPct" type="text" inputmode="numeric" autocomplete="off" placeholder="600%">
        </div>
        <div class="inp" style="grid-column:2;">
          <input id="aPPct" type="text" inputmode="decimal" autocomplete="off" placeholder="10.0%">
        </div>
        <div class="inp" style="grid-column:3;">
          <input id="aF" type="text" inputmode="numeric" autocomplete="off" placeholder="32">
        </div>
      </div>

      <div class="hint">
        ・倍率：最大6桁%（小数1桁まで可）。<br>
        ・確率：最大90.0%（小数第1位まで）。<br>
        ・Ｆ数：最大4桁整数。
      </div>      </div>

    </div>

    <div class="card accordionCard open">
      <div class="headRow accHeader" data-acc="b">
      <h2 class="accTitle"><span class="accIcon" aria-hidden="true">▼</span>入力：スキルB</h2>
      <div class="headToggles">
        <div class="seg" data-for="bAttr">
          <button type="button" data-val="phys">物理</button>
          <button type="button" data-val="magic">魔法</button>
        </div>
        <div class="seg" data-for="bTarget">
          <button type="button" data-val="single">単体</button>
          <button type="button" data-val="multi">複数</button>
        </div>
      </div>
    </div>
    <input type="hidden" id="bAttr" value="magic">
    <input type="hidden" id="bTarget" value="multi">

      <div class="cardBody" id="accBody_b">

      <div class="tworow cols4" id="skillBGrid">
        <div class="lbl" style="grid-column:1;">タイプ</div>
        <div class="lbl" style="grid-column:2;">倍率</div>
        <div class="lbl" style="grid-column:3;" id="bThirdLbl">確率</div>
        <div class="lbl" style="grid-column:4;">Ｆ数</div>

        <div class="inp" style="grid-column:1;">
          <select id="bType">
            <option value="none" selected>無し</option>
            <option value="prob">確率</option>
            <option value="count">規定回数</option>
          </select>
        </div>
        <div class="inp" style="grid-column:2;">
          <input id="bMulPct" type="text" inputmode="numeric" autocomplete="off" placeholder="1500%">
        </div>
        <div class="inp" style="grid-column:3;">
          <input id="bThird" type="text" inputmode="decimal" autocomplete="off" placeholder="12.0%">
        </div>
        <div class="inp" style="grid-column:4;">
          <input id="bF" type="text" inputmode="numeric" autocomplete="off" placeholder="40">
        </div>
      </div>

      <div class="hint">
        ・タイプ：無し / 確率 / 規定回数。<br>
        ・倍率：最大6桁%（小数1桁まで可）。<br>
        ・確率（タイプ=確率）：最大90.0%（小数第1位まで）。<br>
        ・規定回数（タイプ=規定回数）：2桁整数（1〜99）。<br>
        ・Ｆ数：最大4桁整数。
      </div>
    </div>
  </div>

  <div class="card" style="margin-top:12px;">
    <h2>結果</h2>
    <div class="out" id="dpsOut">-</div>
    <div class="subout" id="dpsSub">-</div>
    <div class="rangeBox" id="boundaryBox">
      <div class="rangeTitle">40F境界ズレ（上限）</div>
      <div class="rangeText" id="boundaryOut">-</div>
      <div class="rangeHint" id="boundaryHint">究極：リセット=開始時 かつ「究極中にゲージが進む」場合に、究極中tick数が floor(Ｆ数/40) または ceil(Ｆ数/40) になり得ます（±1tick）。</div>
    </div>


    <div class="bars" id="barsBox">
      <div class="barRow">
        <div class="barLabel">基本攻撃</div>
        <div class="barTrack"><div class="barFill" id="barBasic"></div></div>
        <div class="barValue" id="valBasic">-</div>
      </div>
      <div class="barRow">
        <div class="barLabel">スキルA</div>
        <div class="barTrack"><div class="barFill" id="barA"></div></div>
        <div class="barValue" id="valA">-</div>
      </div>
      <div class="barRow">
        <div class="barLabel">スキルB</div>
        <div class="barTrack"><div class="barFill" id="barB"></div></div>
        <div class="barValue" id="valB">-</div>
      </div>
      <div class="barRow">
        <div class="barLabel">究極</div>
        <div class="barTrack"><div class="barFill" id="barU"></div></div>
        <div class="barValue" id="valU">-</div>
      </div>
    
      <div class="barDivider"></div>
      <div class="barGroupTitle">属性（物理 / 魔法）</div>
      <div class="barRow">
        <div class="barLabel">物理</div>
        <div class="barTrack"><div class="barFill" id="barPhys"></div></div>
        <div class="barValue" id="valPhys">-</div>
      </div>
      <div class="barRow">
        <div class="barLabel">魔法</div>
        <div class="barTrack"><div class="barFill" id="barMagic"></div></div>
        <div class="barValue" id="valMagic">-</div>
      </div>

      <div class="barDivider"></div>
      <div class="barGroupTitle">特性（単体 / 複数）</div>
      <div class="barRow">
        <div class="barLabel">単体</div>
        <div class="barTrack"><div class="barFill" id="barSingle"></div></div>
        <div class="barValue" id="valSingle">-</div>
      </div>
      <div class="barRow">
        <div class="barLabel">複数</div>
        <div class="barTrack"><div class="barFill" id="barMulti"></div></div>
        <div class="barValue" id="valMulti">-</div>
      </div>
</div>

    <div class="btns">
      <button id="calcBtn">計算する</button>
      <button id="saveBtn">入力を保存</button>
      <button id="loadBtn">保存を読み込み</button>
      <button id="resetBtn">初期化</button>
    </div>

    <div class="hr"></div>
    <div class="mono" id="detailOut"></div>
    <div class="hr"></div>
    <div class="formulaTitle">算出式</div>
    <div class="mono" id="formulaOut">-</div>

  </div>
</div>
</body>
</html>
